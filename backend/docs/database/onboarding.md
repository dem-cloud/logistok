# ğŸ—‚ Table: onboarding

---

Î‘Ï€Î¿Î¸Î·ÎºÎµÏÎµÎ¹ Ï„Î·Î½ **Ï€ÏÏŒÎ¿Î´Î¿ Ï„Î¿Ï… onboarding Î¼Î¹Î±Ï‚ ÎµÏ„Î±Î¹ÏÎµÎ¯Î±Ï‚** ÎºÎ±Ï„Î¬ Ï„Î· Î´Î¹Î±Î´Î¹ÎºÎ±ÏƒÎ¯Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î±Ï‚ Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼Î¿Ï ÎºÎ±Î¹ Î±ÏÏ‡Î¹ÎºÎ®Ï‚ ÏÏÎ¸Î¼Î¹ÏƒÎ·Ï‚.  
ÎŸ Ï€Î¯Î½Î±ÎºÎ±Ï‚ ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ Ï„Î·Î½ ÎµÏ€Î±Î½Î±Ï†Î¿ÏÎ¬ Ï„Î·Ï‚ Î´Î¹Î±Î´Î¹ÎºÎ±ÏƒÎ¯Î±Ï‚ Î±Î½ Î¿ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚ Ï„Î· Î´Î¹Î±ÎºÏŒÏˆÎµÎ¹ ÎºÎ±Î¹ Î²Î¿Î·Î¸Î¬ÎµÎ¹ ÏƒÏ„Î· ÏÎ¿Î® Î²Î®Î¼Î±-Î²Î®Î¼Î± (industry â†’ plugins â†’ stores â†’ roles â†’ users â†’ finish).

ÎšÎ¬Î¸Îµ ÎµÏ„Î±Î¹ÏÎµÎ¯Î± Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î­Ï‡ÎµÎ¹ Î¼ÏŒÎ½Î¿ Î­Î½Î± onboarding record.

**Works with:**
- `companies` â†’ Ï€Î¿Î¹Î± ÎµÏ„Î±Î¹ÏÎµÎ¯Î± Î²ÏÎ¯ÏƒÎºÎµÏ„Î±Î¹ ÏƒÏ„Î· Î´Î¹Î±Î´Î¹ÎºÎ±ÏƒÎ¯Î± onboarding
- `company_industries` â†’ ÎµÏ€Î¹Î»Î¿Î³Î® ÎºÎ»Î¬Î´Ï‰Î½ ÏƒÏ„Î¿ ÏƒÏ‡ÎµÏ„Î¹ÎºÏŒ Î²Î®Î¼Î±
- `company_plugins` â†’ ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¯Î·ÏƒÎ· recommended plugins ÎºÎ±Ï„Î¬ Ï„Î¿ onboarding
- `stores` â†’ Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Ï„Î¿Ï… Ï€ÏÏÏ„Î¿Ï… ÎºÎ±Ï„Î±ÏƒÏ„Î®Î¼Î±Ï„Î¿Ï‚
- `roles` â†’ Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± default roles Î³Î¹Î± Ï„Î·Î½ ÎµÏ„Î±Î¹ÏÎµÎ¯Î±
- `company_users` â†’ Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Ï„Î¿Ï… owner Ï‡ÏÎ®ÏƒÏ„Î· ÎºÎ±Î¹ ÎºÎ»Î®ÏƒÎµÎ¹Ï‚ Î³Î¹Î± Ï€ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Ï€ÏÎ¿ÏƒÏ‰Ï€Î¹ÎºÎ¿Ï
- `subscriptions` â†’ ÎµÏ€Î¹Î»Î¿Î³Î® plan ÎºÎ±Î¹ Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± trial/subscription ÎºÎ±Ï„Î¬ Ï„Î¿ Ï„ÎµÎ»Î¹ÎºÏŒ Î²Î®Î¼Î±

Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯Ï„Î±Î¹ Î³Î¹Î±:
- ÏƒÏ…Î½Î­Ï‡Î¹ÏƒÎ· Ï„Î¿Ï… onboarding Î±Ï€ÏŒ Ï„Î¿ ÏƒÎ·Î¼ÎµÎ¯Î¿ Ï€Î¿Ï… ÏƒÏ„Î±Î¼Î¬Ï„Î·ÏƒÎµ Î¿ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚,
- Ï€Î±ÏÎ±ÎºÎ¿Î»Î¿ÏÎ¸Î·ÏƒÎ· Ï„Î¿Ï… Ï„ÏÎ­Ï‡Î¿Î½Ï„Î¿Ï‚ Î²Î®Î¼Î±Ï„Î¿Ï‚ (current_step),
- Î±Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Ï€ÏÎ¿ÏƒÏ‰ÏÎ¹Î½ÏÎ½ ÎµÏ€Î¹Î»Î¿Î³ÏÎ½ (Ï€.Ï‡. plugin selections),
- Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î· Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± default data ÏŒÏ„Î±Î½ Î¿Î»Î¿ÎºÎ»Î·ÏÏ‰Î¸ÎµÎ¯ Ï„Î¿ onboarding.

Î•Î¾Î±ÏƒÏ†Î±Î»Î¯Î¶ÎµÎ¹ ÏŒÏ„Î¹ Î· ÎµÏ„Î±Î¹ÏÎµÎ¯Î± Î¾ÎµÎºÎ¹Î½Î¬ Î¼Îµ ÏƒÏ‰ÏƒÏ„Î¬ Î´ÎµÎ´Î¿Î¼Î­Î½Î± ÎºÎ±Î¹ ÎºÎ±Ï„Î¬Î»Î»Î·Î»ÎµÏ‚ ÏÏ…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚ Ï‡Ï‰ÏÎ¯Ï‚ Î½Î± Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹ Ï‡ÎµÎ¹ÏÎ¿ÎºÎ¯Î½Î·Ï„Î· Ï€Î±ÏÎ­Î¼Î²Î±ÏƒÎ·.

---

## ğŸ“Œ 1. Fields Definition

| Field | Type | Null | Default | Description |
|-------|--------|------|---------|-------------|
| id (PK) | UUID | NOT NULL | gen_random_uuid() | Unique onboarding record identifier |
| company_id (FK) | UUID | NOT NULL | â€” | References companies(id). Each company has one onboarding record |
| current_step | INT | NULL | 1 | Current onboarding step the company is on |
| is_completed | BOOLEAN | NOT NULL | FALSE | Whether onboarding is fully finished |
| data | JSONB | NULL | â€” | All onboarding data (temp_industries, temp_plugins, selected_plan_id, etc.) |
| created_at | TIMESTAMP | NOT NULL | NOW() | Creation timestamp |

---

## â„¹ï¸ Suggested Onboarding Step Mapping

| Step | Description |
|------|-------------|
| 1 | Basic company info (name, country) |
| 2 | Select industry |
| 3 | Select plugins (recommended + optional) |
| 4 | Select subscription plan |
| 5 | Create first store |
| 6 | Add initial roles & staff (optional) |
| 7 | Completed |

---

## â„¹ï¸ Notes

âœ” 1. ÎšÎ¬Î¸Îµ ÎµÏ„Î±Î¹ÏÎµÎ¯Î± Î­Ï‡ÎµÎ¹ Î¼ÏŒÎ½Î¿ Î­Î½Î± onboarding record

Î‘Ï…Ï„ÏŒ Î±Ï€Î¿Ï„ÏÎ­Ï€ÎµÎ¹ Ï€Î¿Î»Î»Î±Ï€Î»Î­Ï‚ Ï€Î±ÏÎ¬Î»Î»Î·Î»ÎµÏ‚ Î´Î¹Î±Î´Î¹ÎºÎ±ÏƒÎ¯ÎµÏ‚ onboarding.

ÎˆÎ½Î± Î±Ï€Î»ÏŒ unique constraint:
```sql
CREATE UNIQUE INDEX one_onboarding_per_company
ON onboarding(company_id);
```

âœ” 2. Î¤Î¿ `current_step` Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î³Î¯Î½ÎµÎ¹ NULL ÏŒÏ„Î±Î½ Î¿Î»Î¿ÎºÎ»Î·ÏÏ‰Î¸ÎµÎ¯

ÎˆÏ„ÏƒÎ¹ Î¾Î­ÏÎµÎ¹Ï‚:
  - Î±Î½ ÎµÎ¯Î½Î±Î¹ NULL â†’ onboarding finished
  - Î±Î½ Î­Ï‡ÎµÎ¹ Î±ÏÎ¹Î¸Î¼ÏŒ â†’ Î²ÏÎ¯ÏƒÎºÎµÏ„Î±Î¹ ÏƒÎµ ÎµÎ¾Î­Î»Î¹Î¾Î·

âœ” 3. Î¤Î¿ `data` Ï€ÎµÏÎ¹Î­Ï‡ÎµÎ¹ ÏŒÎ»Î± Ï„Î± Ï€ÏÎ¿ÏƒÏ‰ÏÎ¹Î½Î¬ ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î± Ï„Î¿Ï… onboarding

Î•Î½Î´ÎµÎ¹ÎºÏ„Î¹ÎºÏŒ Ï€ÎµÏÎ¹ÎµÏ‡ÏŒÎ¼ÎµÎ½Î¿:

```json
{
  "temp_industries": ["ind-0001", "ind-0004"],
  "temp_plugins": ["fuel_station"],
  "selected_plan_id": "plan-pro",
  "company_name": "Î Î±Ï€Î±Î´ÏŒÏ€Î¿Ï…Î»Î¿Ï‚ Î¥Î»Î¹ÎºÎ¬",
  "contact_phone": "2109988776"
}
```

Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯Ï„Î±Î¹ Î¼ÏŒÎ½Î¿ ÎºÎ±Ï„Î¬ Ï„Î· Î´Î¹Î¬ÏÎºÎµÎ¹Î± Ï„Î¿Ï… onboarding.

ÎœÎµÏ„Î¬, Ï„Î± real records Ï€Î¬Î½Îµ ÏƒÏ„Î¿Ï…Ï‚ ÎºÎ±Î½Î¿Î½Î¹ÎºÎ¿ÏÏ‚ Ï€Î¯Î½Î±ÎºÎµÏ‚:
  - `company_industries`
  - `company_plugins`
  - `subscriptions`
  - `stores` (Î±Î½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½)
  - ÎºÎ»Ï€.

âœ” 4. Î“Î¹Î±Ï„Î¯ Î´ÎµÎ½ Î­Ï‡Î¿Ï…Î¼Îµ Ï€Î¿Î»Î»Î¬ Ï€ÎµÎ´Î¯Î± (temp_industries, temp_plugins ÎºÏ„Î».);

Î“Î¹Î±Ï„Î¯:
  - Ï„Î¿ onboarding Î±Î»Î»Î¬Î¶ÎµÎ¹ ÏƒÏ…Ï‡Î½Î¬
  - Î¸Î­Î»Î¿Ï…Î¼Îµ ÎµÏ…ÎµÎ»Î¹Î¾Î¯Î±
  - Î´ÎµÎ½ Î¸Î­Î»Î¿Ï…Î¼Îµ ALTER TABLE ÎºÎ¬Î¸Îµ Ï†Î¿ÏÎ¬ Ï€Î¿Ï… Ï€ÏÎ¿ÏƒÎ¸Î­Ï„Î¿Ï…Î¼Îµ Î²Î®Î¼Î±
  - JSONB Î­Ï‡ÎµÎ¹ ÎµÎ¾Î±Î¹ÏÎµÏ„Î¹ÎºÎ® Ï…Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î· indexing ÎºÎ±Î¹ querying ÏƒÏ„Î¿ PostgreSQL

ÎˆÏ„ÏƒÎ¹ Î¼Ï€Î¿ÏÎµÎ¯Ï‚ Î½Î± Î¼Î¿Ï… Î´ÏÏƒÎµÎ¹Ï‚:

```json
{
  "branches": ["Athens", "Thessaloniki"],
  "selected_role_templates": ["owner", "manager"],
  "extra_users": [
    {"email": "employee1@test.com", "role": "cashier"},
    {"email": "employee2@test.com", "role": "warehouse"}
  ]
}
```

ÎºÎ±Î¹ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³ÎµÎ¯ Î¬ÏˆÎ¿Î³Î± Ï‡Ï‰ÏÎ¯Ï‚ Î½Î± Î±Î»Î»Î¬Î¾ÎµÎ¹ schema.

âœ” 5. Î§ÏÎ®ÏƒÎ¹Î¼Î¿ Î³Î¹Î± â€œresume onboardingâ€

Î‘Î½ ÎºÎ¬Ï€Î¿Î¹Î¿Ï‚ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚ ÎºÎ»ÎµÎ¯ÏƒÎµÎ¹ Ï„Î¿ browser:
  - ÎµÏ€Î¹ÏƒÏ„ÏÎ­Ï†ÎµÎ¹ ÏƒÏ„Î¿ last saved step
  - Î²Î»Î­Ï€ÎµÎ¹ Ï„Î± Ï€ÏÎ¿ÏƒÏ‰ÏÎ¹Î½Î¬ Î´ÎµÎ´Î¿Î¼Î­Î½Î±
  - ÏƒÏ…Î½ÎµÏ‡Î¯Î¶ÎµÎ¹ Ï‡Ï‰ÏÎ¯Ï‚ Î±Ï€ÏÎ»ÎµÎ¹ÎµÏ‚

âœ” 6. ÎŸ Ï€Î¯Î½Î±ÎºÎ±Ï‚ Î´ÎµÎ½ Î´Î¹Î±Î³ÏÎ¬Ï†ÎµÏ„Î±Î¹ ÏƒÏ…Î½Î®Î¸Ï‰Ï‚

Î¤Î¿ onboarding Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯Ï„Î±Î¹ Î³Î¹Î±:
  - analytics
  - conversion metrics
  - troubleshooting
  - customer success

---

## ğŸ“Œ 2. Example Rows

| id      | company_id | current_step | is_completed | data                                                                                                            | created_at          |
| ------- | ---------- | ------------ | ------------ | --------------------------------------------------------------------------------------------------------------- | ------------------- |
| onb-001 | comp-1111  | 3            | FALSE        | {"temp_industries":["ind-0001","ind-0004"],"temp_plugins":["fuel_station"],"company_name":"Î Î±Ï€Î±Î´ÏŒÏ€Î¿Ï…Î»Î¿Ï‚ Î¥Î»Î¹ÎºÎ¬"} | 2025-01-01 10:00:00 |
| onb-002 | comp-2222  | NULL         | TRUE         | {"selected_plan_id":"plan-pro","temp_plugins":["reporting"],"accepted_terms":true}                              | 2025-01-01 10:00:01 |
| onb-003 | comp-3333  | 1            | FALSE        | {"temp_industries":["ind-0003"]}                                                                                | 2025-01-01 10:00:02 |

---

## ğŸ“Œ 3. SQL: CREATE TABLE (Supabase)

```sql
CREATE TABLE onboarding (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),

  company_id UUID NOT NULL UNIQUE REFERENCES companies(id) ON DELETE CASCADE,

  current_step INT NOT NULL DEFAULT 1,
  is_completed BOOLEAN NOT NULL DEFAULT FALSE,

  data JSONB NOT NULL DEFAULT '{
      "company": {
          "name": "",
          "phone": ""
      },
      "industries": [],
      "plan": null,
      "plugins": []
  }',

  created_at TIMESTAMP NOT NULL DEFAULT NOW(),
  updated_at TIMESTAMP NOT NULL DEFAULT NOW()

);
```

---

## ğŸ“Œ 4. SQL: Insert Demo Data

```sql
INSERT INTO onboarding
  (company_id, current_step, is_completed, data)
VALUES
  -- Î•Ï„Î±Î¹ÏÎµÎ¯Î± ÏƒÏ„Î· Î¼Î­ÏƒÎ· Ï„Î¿Ï… onboarding
  (
    'comp-1111',
    3,
    FALSE,
    '{
      "temp_industries": ["ind-0001", "ind-0004"],
      "temp_plugins": ["fuel_station"],
      "company_name": "Î Î±Ï€Î±Î´ÏŒÏ€Î¿Ï…Î»Î¿Ï‚ Î¥Î»Î¹ÎºÎ¬"
    }'::jsonb
  ),

  -- ÎŸÎ»Î¿ÎºÎ»Î·ÏÏ‰Î¼Î­Î½Î¿ onboarding
  (
    'comp-2222',
    NULL,
    TRUE,
    '{
      "selected_plan_id": "plan-pro",
      "temp_plugins": ["reporting"],
      "accepted_terms": true
    }'::jsonb
  ),

  -- Î•Ï„Î±Î¹ÏÎµÎ¯Î± Ï€Î¿Ï… Î¼ÏŒÎ»Î¹Ï‚ Î¾ÎµÎºÎ¯Î½Î·ÏƒÎµ Ï„Î¿ onboarding
  (
    'comp-3333',
    1,
    FALSE,
    '{
      "temp_industries": ["ind-0003"]
    }'::jsonb
  );
```